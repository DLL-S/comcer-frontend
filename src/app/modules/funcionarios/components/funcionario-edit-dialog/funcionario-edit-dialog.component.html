<h1 mat-dialog-title *ngIf="!data">Adicionar funcionário</h1>
<h1 mat-dialog-title *ngIf="data">Editar funcionário</h1>

<form [formGroup]="formDadosPessoais">

   <!-- Situação -->
   <section class="situacao-container">
      <mat-button-toggle-group formControlName="situacao" aria-label="Situação">
         <mat-button-toggle cdkFocusInitial [value]="0">Ativo</mat-button-toggle>
         <mat-button-toggle [value]="1">Inativo</mat-button-toggle>
      </mat-button-toggle-group>
   </section>

   <!-- Dados pessoais -->
   <mat-grid-list cols="6" rowHeight="80px">

      <!-- Id -->
      <mat-grid-tile colspan="1" class="field-with-space">
         <mat-form-field class="full-width-input" appearance="outline">
            <mat-label>ID</mat-label>
            <input matInput type="text" placeholder="Id" formControlName="id" />
         </mat-form-field>
      </mat-grid-tile>

      <!-- Nome -->
      <mat-grid-tile colspan="3" class="field-with-space">
         <mat-form-field class="full-width-input" appearance="outline">
            <mat-label>Nome</mat-label>
            <input matInput type="text" placeholder="Nome" formControlName="nome" required>
            <mat-error *ngIf="isFieldInvalid('dadosPessoais', 'nome')">
               O nome deve conter de 3 a 80 caracteres
            </mat-error>
         </mat-form-field>
      </mat-grid-tile>

      <!-- Cpf -->
      <mat-grid-tile colspan="2">
         <mat-form-field class="full-width-input" appearance="outline">
            <mat-label>CPF</mat-label>
            <input matInput mask="000.000.000-00" type="text" placeholder="CPF" formControlName="cpf" required>
            <mat-error *ngIf="isFieldInvalid('dadosPessoais', 'cpf')">
               Informe um CPF válido
            </mat-error>
         </mat-form-field>
      </mat-grid-tile>

      <!-- Data de nascimento -->
      <mat-grid-tile colspan="2" class="field-with-space">
         <mat-form-field class="full-width-input" appearance="outline">
            <mat-label>Data de nascimento</mat-label>
            <input matInput type="date" placeholder="Data de nascimento" formControlName="dataNascimento" required>
            <mat-error *ngIf="isFieldInvalid('dadosPessoais', 'dataNascimento')">
               Informe a data de nascimento
            </mat-error>
         </mat-form-field>
      </mat-grid-tile>

      <!-- Email -->
      <mat-grid-tile colspan="2" class="field-with-space">
         <mat-form-field class="full-width-input" appearance="outline">
            <mat-label>E-mail</mat-label>
            <input matInput type="email" maxlength="60" placeholder="email" formControlName="email" required>
            <mat-error *ngIf="isFieldInvalid('dadosPessoais', 'email')">
               Informe um e-mail válido
            </mat-error>
         </mat-form-field>
      </mat-grid-tile>

      <!-- Celular -->
      <mat-grid-tile colspan="2">
         <mat-form-field class="full-width-input" appearance="outline">
            <mat-label>Celular</mat-label>
            <input matInput mask="(00) 00000-0000" type="text" placeholder="Celular" formControlName="celular" required>
            <mat-error *ngIf="isFieldInvalid('dadosPessoais', 'celular')">
               Informe um número válido
            </mat-error>
         </mat-form-field>
      </mat-grid-tile>
   </mat-grid-list>

</form>

<mat-divider></mat-divider>

<form [formGroup]="formEndereco">

   <mat-grid-list cols="4" rowHeight="80px">

      <!-- CEP -->
      <mat-grid-tile colspan="1" class="field-with-space">
         <mat-form-field class="full-width-input" appearance="outline">
            <mat-label>CEP</mat-label>
            <input matInput mask="00.000-000" (change)="buscarCep()" maxlength="10" type="text" placeholder="CEP"
               formControlName="cep" required>
            <mat-error *ngIf="isFieldInvalid('endereco', 'cep')">
               Informe um CEP válido
            </mat-error>
         </mat-form-field>
      </mat-grid-tile>

      <!-- Estado -->
      <mat-grid-tile colspan="1" class="field-with-space">
         <mat-form-field class="full-width-input" appearance="outline">
            <mat-label>Estado</mat-label>
            <input matInput type="text" maxlength="40" placeholder="Estado" formControlName="estado" required>
            <mat-error *ngIf="isFieldInvalid('endereco', 'estado')">
               Informe o estado
            </mat-error>
         </mat-form-field>
      </mat-grid-tile>

      <!-- Cidade -->
      <mat-grid-tile colspan="2" class="field-with-space">
         <mat-form-field class="full-width-input" appearance="outline">
            <mat-label>Cidade</mat-label>
            <input matInput type="text" maxlength="40" placeholder="Cidade" formControlName="cidade" required>
            <mat-error *ngIf="isFieldInvalid('endereco', 'cidade')">
               Informe a cidade
            </mat-error>
         </mat-form-field>
      </mat-grid-tile>

      <!-- Bairro -->
      <mat-grid-tile colspan="2" class="field-with-space">
         <mat-form-field class="full-width-input" appearance="outline">
            <mat-label>Bairro</mat-label>
            <input matInput type="text" maxlength="60" placeholder="Bairro" formControlName="bairro" required>
            <mat-error *ngIf="isFieldInvalid('endereco', 'bairro')">
               Informe o bairro
            </mat-error>
         </mat-form-field>
      </mat-grid-tile>

      <!-- Rua -->
      <mat-grid-tile colspan="1" class="field-with-space">
         <mat-form-field class="full-width-input" appearance="outline">
            <mat-label>Rua</mat-label>
            <input matInput type="text" placeholder="Rua" formControlName="rua" required>
            <mat-error *ngIf="isFieldInvalid('endereco', 'rua')">
               Informe a rua
            </mat-error>
         </mat-form-field>
      </mat-grid-tile>

      <!-- Número -->
      <mat-grid-tile colspan="1">
         <mat-form-field class="full-width-input" appearance="outline">
            <mat-label>Número</mat-label>
            <input matInput type="number" placeholder="Número" formControlName="numero" required>
            <mat-error *ngIf="isFieldInvalid('endereco', 'numero')">
               Informe o número
            </mat-error>
         </mat-form-field>
      </mat-grid-tile>

      <!-- Complemento -->
      <mat-grid-tile colspan="4">
         <mat-form-field class="full-width-input" appearance="outline">
            <mat-label>Complemento</mat-label>
            <input matInput type="text" maxlength="60" placeholder="Complemento" formControlName="complemento">
            <mat-error *ngIf="isFieldInvalid('endereco', 'complemento')">
               Complemento deve ter até 60 caracteres
            </mat-error>
         </mat-form-field>
      </mat-grid-tile>

   </mat-grid-list>
</form>

<form *ngIf="!data" [formGroup]="formUsuario">

   <mat-divider></mat-divider>

   <mat-grid-list cols="4" rowHeight="80px">

      <!-- Senha -->
      <mat-grid-tile colspan="4">
         <mat-form-field class="full-width-input" appearance="outline">
            <mat-label>Senha</mat-label>
            <input matInput minlength="8" type="password" placeholder="Senha" formControlName="senha" required>
            <mat-error *ngIf="isFieldInvalid('usuario', 'senha')">
               Senha deve possui no mínimo 8 caracteres
            </mat-error>
         </mat-form-field>
      </mat-grid-tile>

   </mat-grid-list>

</form>

<app-validacoes></app-validacoes>

<div mat-dialog-actions>
   <button mat-button color="warn" type="button" (click)="cancelar()">Cancelar</button>
   <button mat-button color="primary" type="button" (click)="concluir()"
      [disabled]="!(formDadosPessoais.valid && formEndereco.valid && (data || formUsuario.valid))">Salvar</button>
</div>
